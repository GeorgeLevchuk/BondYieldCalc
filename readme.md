# Bond Yield Calculator

–≠—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞ Python –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –æ–±–ª–∏–≥–∞—Ü–∏–π —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤:

- **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±–ª–∏–≥–∞—Ü–∏–∏ (Fixed)** ‚Äî —Ä–∞—Å—á—ë—Ç —Ç–µ–∫—É—â–µ–π –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ (Current Yield) –∏ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –∫ –ø–æ–≥–∞—à–µ–Ω–∏—é (YTM).
- **–õ–∏–Ω–∫–µ—Ä—ã (–û–§–ó-–ò–ù)** ‚Äî –æ–±–ª–∏–≥–∞—Ü–∏–∏ —Å –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ–º—ã–º –Ω–æ–º–∏–Ω–∞–ª–æ–º. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (Real Yield) —Å —É—á—ë—Ç–æ–º –∏–Ω—Ñ–ª—è—Ü–∏–∏.
- **–§–ª–æ–∞—Ç–µ—Ä—ã (–û–§–ó-–ü–ö)** ‚Äî –æ–±–ª–∏–≥–∞—Ü–∏–∏ —Å –ø–ª–∞–≤–∞—é—â–∏–º –∫—É–ø–æ–Ω–æ–º. –ö—É–ø–æ–Ω –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ –±–∞–∑–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞ (RUONIA –∏–ª–∏ –∫–ª—é—á–µ–≤–∞—è —Å—Ç–∞–≤–∫–∞ –¶–ë) + —Å–ø—Ä–µ–¥.

## üî¢ –§–æ—Ä–º—É–ª—ã

### 1. –¢–µ–∫—É—â–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (Current Yield)
$$
CY = \frac{C_{annual}}{P}
$$
–≥–¥–µ:  
- $C_{annual}$ ‚Äî –≥–æ–¥–æ–≤–æ–π –∫—É–ø–æ–Ω,  
- $P$ ‚Äî —Ç–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ –æ–±–ª–∏–≥–∞—Ü–∏–∏.

---

### 2. –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∫ –ø–æ–≥–∞—à–µ–Ω–∏—é (Yield to Maturity, YTM)
$$
P = \sum_{t=1}^{N} \frac{C}{\left(1+\frac{YTM}{m}\right)^t} + \frac{NOM}{\left(1+\frac{YTM}{m}\right)^N}
$$
–≥–¥–µ:  
- $P$ ‚Äî —Ç–µ–∫—É—â–∞—è —Ü–µ–Ω–∞ –æ–±–ª–∏–≥–∞—Ü–∏–∏,  
- $C$ ‚Äî –∫—É–ø–æ–Ω –∑–∞ –ø–µ—Ä–∏–æ–¥,  
- $NOM$ ‚Äî –Ω–æ–º–∏–Ω–∞–ª –æ–±–ª–∏–≥–∞—Ü–∏–∏,  
- $m$ ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—É–ø–æ–Ω–Ω—ã—Ö –≤—ã–ø–ª–∞—Ç –≤ –≥–æ–¥,  
- $N$ ‚Äî –æ–±—â–µ–µ —á–∏—Å–ª–æ –≤—ã–ø–ª–∞—Ç –¥–æ –ø–æ–≥–∞—à–µ–Ω–∏—è.

---

### 3. –†–µ–∞–ª—å–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å (–¥–ª—è –ª–∏–Ω–∫–µ—Ä–æ–≤)
$$
RY = YTM - \pi
$$
–≥–¥–µ:  
- $YTM$ ‚Äî –Ω–æ–º–∏–Ω–∞–ª—å–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∫ –ø–æ–≥–∞—à–µ–Ω–∏—é,  
- $\pi$ ‚Äî —É—Ä–æ–≤–µ–Ω—å –∏–Ω—Ñ–ª—è—Ü–∏–∏.

---

### 4. –§–ª–æ–∞—Ç–µ—Ä—ã (–∫—É–ø–æ–Ω)
$$
Coupon = BaseRate + Spread
$$
–≥–¥–µ:  
- $BaseRate$ ‚Äî –±–∞–∑–æ–≤–∞—è —Å—Ç–∞–≤–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–ª—é—á–µ–≤–∞—è —Å—Ç–∞–≤–∫–∞ –¶–ë),  
- $Spread$ ‚Äî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∞–¥–±–∞–≤–∫–∞.

## ‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:
```python
bonds = [
    {"name": "–û–§–ó-26238", "type": "fixed", "price": 900, "coupon": 35, "years": 3},
    {"name": "–û–§–ó-–ò–ù 52002", "type": "linker", "price": 950, "coupon": 25, "years": 4},
    {"name": "–û–§–ó-–ü–ö 29015", "type": "floater", "price": 1000, "coupon": 0, "years": 5, "spread": 0.005}
]

report = analyze_bonds(bonds, inflation=0.06, base_rate=0.15)
for r in report:
    print(r)
```

## üìä –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏
```text
{'name': '–û–§–ó-26238', 'type': 'Fixed', 'Current Yield': '7.78%', 'YTM': '14.82%'}
{'name': '–û–§–ó-–ò–ù 52002', 'type': 'Linker', 'YTM': '13.21%', 'Real Yield': '7.21%'}
{'name': '–û–§–ó-–ü–ö 29015', 'type': 'Floater', 'Coupon Now': '15.50%'}
```

## üìë –ö—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥ —á–µ—Ä–µ–∑ Pandas
```python
import pandas as pd

report = analyze_bonds(bonds, inflation=0.06, base_rate=0.15)
df = pd.DataFrame(report)
print(df)
```

### –ü—Ä–∏–º–µ—Ä —Ç–∞–±–ª–∏—á–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞:
```
        name     type Current Yield     YTM Real Yield Coupon Now
0  –û–§–ó-26238    Fixed         7.78%  14.82%       NaN       NaN
1  –û–§–ó-–ò–ù 52002 Linker          NaN  13.21%     7.21%       NaN
2  –û–§–ó-–ü–ö 29015 Floater        NaN     NaN       NaN    15.50%
```

## üìà –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π
### –ì—Ä–∞—Ñ–∏–∫ YTM
```python
import matplotlib.pyplot as plt
import pandas as pd

report = analyze_bonds(bonds, inflation=0.06, base_rate=0.15)
df = pd.DataFrame(report)

plt.figure(figsize=(8,5))
plt.bar(df['name'], df['YTM'].str.rstrip('%').astype(float), color='skyblue')
plt.ylabel('–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∫ –ø–æ–≥–∞—à–µ–Ω–∏—é (YTM), %')
plt.title('–î–æ—Ö–æ–¥–Ω–æ—Å—Ç–∏ –æ–±–ª–∏–≥–∞—Ü–∏–π')
plt.show()
```

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π (CY, YTM, Real Yield)
```python
import matplotlib.pyplot as plt
import pandas as pd

report = analyze_bonds(bonds, inflation=0.06, base_rate=0.15)
df = pd.DataFrame(report)

# –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç—ã –≤ float
for col in ["Current Yield", "YTM", "Real Yield"]:
    if col in df:
        df[col] = df[col].str.rstrip('%').astype(float)

# –ü–æ—Å—Ç—Ä–æ–∏–º —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
plt.figure(figsize=(10,6))
df_plot = df.melt(id_vars=["name"], value_vars=["Current Yield", "YTM", "Real Yield"], var_name="–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å", value_name="–ó–Ω–∞—á–µ–Ω–∏–µ")
df_plot = df_plot.dropna()

for label, subset in df_plot.groupby("–ü–æ–∫–∞–∑–∞—Ç–µ–ª—å"):
    plt.bar(subset["name"], subset["–ó–Ω–∞—á–µ–Ω–∏–µ"], label=label, alpha=0.7)

plt.ylabel('–î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å, %')
plt.title('–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π –æ–±–ª–∏–≥–∞—Ü–∏–π')
plt.legend()
plt.show()
```

---

## üõ† –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –†–∞—Å—á—ë—Ç **CY, YTM, Real Yield, Floater Coupon**.
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ **—Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ–±–ª–∏–≥–∞—Ü–∏–π**.
- –ì–∏–±–∫–æ—Å—Ç—å: –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–ª—è—Ü–∏—é, –±–∞–∑–æ–≤—É—é —Å—Ç–∞–≤–∫—É –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—É–ø–æ–Ω–Ω—ã—Ö –≤—ã–ø–ª–∞—Ç –≤ –≥–æ–¥.
- –ö—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ **—Ç–∞–±–ª–∏—á–Ω–æ–π —Ñ–æ—Ä–º–µ**.
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–∞—Ö (YTM –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π).

## üîÆ –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –±–∏—Ä–∂–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Ü–µ–Ω –∏ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç–µ–π.
